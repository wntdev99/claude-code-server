# 1.8 기술 검토 가이드

## 목적

기술 스택을 결정하고 기술적 리스크를 식별합니다.

---

## 입력

- `result/planning/07_features.md`
- `form/intake_form.md`의 Section 4 (어떤 정보를 다루나요?)
  - 4.1 보여줘야 할 정보
  - 4.2 정보 출처
  - 4.3 기존 시스템
  - 4.4 실시간 여부
  - 4.5 데이터 규모
- `form/intake_form.md`의 Section 5 (어떻게 생겼으면 좋겠어요?)
  - 5.1 플랫폼 (필수)
- `form/intake_form.md`의 Section 7 (현실적인 것들)
  - 7.3 이미 있는 것들
  - 7.4 기술적 제약

---

## 작업 항목

### 1. 기술 요구사항 분석

```markdown
## 기술 요구사항

### 기능적 요구사항에서 도출

| 기능 | 필요 기술 | 비고 |
|------|----------|------|
| 실시간 데이터 | WebSocket / SSE | 지연 < 1초 |
| 오프라인 지원 | 로컬 DB | 동기화 필요 |
| 푸시 알림 | FCM / APNs | 백그라운드 |
| 지도 표시 | Map SDK | 마커 다수 |
| ... | ... | ... |

### 비기능적 요구사항

| 항목 | 요구사항 | 측정 |
|------|----------|------|
| 성능 | 로딩 < 3초 | LCP |
| 가용성 | 99.9% uptime | 모니터링 |
| 확장성 | 1000+ 동시 접속 | 부하 테스트 |
| 보안 | 데이터 암호화 | 감사 |
| 접근성 | WCAG 2.1 AA | 검사 도구 |
```

### 2. 기술 스택 옵션 비교

```markdown
## 기술 스택 옵션

### 프론트엔드 / 모바일

| 옵션 | 장점 | 단점 | 적합도 |
|------|------|------|--------|
| **Flutter** | 크로스플랫폼, 빠른 개발 | 네이티브 성능 한계 | ⭐⭐⭐⭐⭐ |
| React Native | 웹 기술, 생태계 | 성능, 업데이트 | ⭐⭐⭐⭐ |
| Native (Swift/Kotlin) | 최고 성능 | 2배 개발 비용 | ⭐⭐⭐ |

**선택**: Flutter
**이유**: 크로스플랫폼 + 빠른 개발 + 충분한 성능

### 백엔드

| 옵션 | 장점 | 단점 | 적합도 |
|------|------|------|--------|
| **Supabase** | 빠른 시작, 실시간, 인증 | 커스텀 제한 | ⭐⭐⭐⭐⭐ |
| Firebase | 통합 서비스 | 비용, vendor lock | ⭐⭐⭐⭐ |
| FastAPI + PostgreSQL | 완전한 제어 | 개발 시간 | ⭐⭐⭐ |

**선택**: Supabase (MVP) → FastAPI (확장 시)
**이유**: MVP 빠른 출시 + 마이그레이션 가능

### 상태관리 (Flutter)

| 옵션 | 장점 | 단점 | 적합도 |
|------|------|------|--------|
| **Riverpod** | 타입 안전, 테스트 용이 | 학습 곡선 | ⭐⭐⭐⭐⭐ |
| Provider | 간단 | 복잡한 상태 어려움 | ⭐⭐⭐⭐ |
| Bloc | 구조적 | 보일러플레이트 | ⭐⭐⭐ |

**선택**: Riverpod
```

### 3. 최종 기술 스택

```markdown
## 최종 기술 스택

### 클라이언트
- **Framework**: Flutter 3.x
- **상태관리**: Riverpod
- **라우팅**: GoRouter
- **로컬 DB**: Hive (경량) / Drift (복잡)
- **HTTP**: Dio
- **UI**: Material 3

### 서버/백엔드
- **BaaS**: Supabase
  - Database: PostgreSQL
  - Auth: Supabase Auth
  - Realtime: Supabase Realtime
  - Storage: Supabase Storage

### 인프라
- **호스팅**: Supabase (managed)
- **CI/CD**: GitHub Actions
- **모니터링**: Sentry

### 외부 서비스
- **푸시 알림**: Firebase Cloud Messaging
- **분석**: Mixpanel / Amplitude
- **지도**: Google Maps / Mapbox

### 개발 도구
- **IDE**: VS Code / Android Studio
- **버전관리**: Git + GitHub
```

### 4. 기술 리스크 분석

```markdown
## 기술 리스크

### 리스크 매트릭스

| 리스크 | 영향 | 발생 확률 | 대응 전략 |
|--------|------|----------|----------|
| 로봇 API 스펙 변경 | 높음 | 중간 | 추상화 레이어, 버전 관리 |
| 대량 데이터 성능 저하 | 중간 | 높음 | 페이지네이션, 가상화 |
| 실시간 연결 불안정 | 높음 | 낮음 | 폴링 폴백, 재연결 로직 |
| Supabase 한계 도달 | 중간 | 낮음 | FastAPI 마이그레이션 준비 |
| 오프라인/온라인 동기화 | 높음 | 중간 | 충돌 해결 로직 설계 |

### 기술적 부채 예방

- 코드 리뷰 필수
- 테스트 커버리지 70% 이상
- 문서화 (API, 아키텍처)
```

### 5. PoC / 스파이크 필요 항목

```markdown
## PoC 필요 항목

### 검증이 필요한 기술적 불확실성

| 항목 | 검증 내용 | 소요 시간 | 우선순위 |
|------|----------|----------|----------|
| 로봇 API 연동 | 실제 연동 테스트 | 1일 | P0 |
| 실시간 데이터 100대 | 성능 측정 | 2일 | P0 |
| 지도 마커 렌더링 | 500개 마커 성능 | 1일 | P1 |
| 오프라인 동기화 | 충돌 해결 로직 | 2일 | P1 |

### PoC 결과 기록 양식

**PoC: [항목명]**
- 목표: [검증 목표]
- 방법: [테스트 방법]
- 결과: [성공/실패/조건부 성공]
- 결론: [채택 여부 및 주의사항]
```

---

## 산출물 템플릿

`result/planning/08_tech.md`에 작성:

```markdown
# 기술 검토

## 1. 기술 요구사항

### 기능적 요구사항
| 기능 | 필요 기술 |
|------|----------|
| | |

### 비기능적 요구사항
| 항목 | 요구사항 |
|------|----------|
| 성능 | |
| 가용성 | |
| 확장성 | |

---

## 2. 기술 스택

### 클라이언트
- Framework:
- 상태관리:
- 라우팅:

### 서버
- Backend:
- Database:
- Auth:

### 인프라
- Hosting:
- CI/CD:

### 외부 서비스
- 푸시:
- 분석:

---

## 3. 기술 리스크

| 리스크 | 영향 | 확률 | 대응 |
|--------|------|------|------|
| | | | |

---

## 4. PoC 필요 항목

| 항목 | 검증 내용 | 상태 |
|------|----------|------|
| | | 대기 |

---

## 다음 단계
→ 1.9 로드맵
```

---

## 다이어그램 가이드

문서에 다음과 같은 mermaid 다이어그램을 포함하여 시각적으로 표현하세요:

### 시스템 아키텍처 다이어그램 (flowchart)
```
\`\`\`mermaid
flowchart TB
    subgraph Client["클라이언트"]
        A[웹/모바일 앱]
    end
    subgraph Backend["백엔드"]
        B[API 서버]
        C[데이터베이스]
        D[캐시]
    end
    subgraph External["외부 서비스"]
        E[인증 서비스]
        F[푸시 알림]
        G[스토리지]
    end
    A --> B
    B --> C
    B --> D
    B --> E
    B --> F
    B --> G
\`\`\`
```

---

## 체크리스트

- [ ] 기술 요구사항 도출 완료
- [ ] 각 레이어별 기술 스택 결정
- [ ] 기술 리스크 3개 이상 식별
- [ ] PoC 필요 항목 정리
- [ ] mermaid 다이어그램으로 시스템 아키텍처 시각화

---

## 다음 단계

→ `09_roadmap.md` (로드맵)
